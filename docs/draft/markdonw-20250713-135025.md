---
title: Markdonw语法
date: 2025-07-13 13:50:24
type: post
blog: false
render_type: html
description: Markdonw语法
tags:
- 微信公众号
- 混沌随想
---

# 微信同步助手集成 GitHub VuePress 自动发布方案

最近在用微信同步助手将公众号文章同步到各个平台，发现可以扩展支持 GitHub VuePress 博客。经过一番研究，成功实现了从微信公众号一键同步到 VuePress 博客的功能。

## 背景需求

作为一个技术博主，我的内容发布流程是：
1. 在微信公众号编辑器写文章
2. 手动复制到 GitHub 仓库的 VuePress 博客
3. 提交 Git 推送触发部署

这个流程很繁琐，特别是图片需要单独上传处理。微信同步助手原本支持知乎、CSDN 等平台，但不支持 GitHub。于是我开发了一个 GitHub VuePress 驱动。

## 实现方案

### 核心功能
- **一键同步**：微信文章直接同步到 GitHub 仓库
- **图片自动上传**：文章中的图片自动上传到 GitHub 并更新链接
- **格式转换**：HTML 自动转换为 Markdown 格式
- **Front-matter 生成**：自动添加 VuePress 需要的元数据

### 技术实现
使用 GitHub API 实现：
- 文章内容上传到 `docs/draft/` 目录
- 图片上传到 `docs/assets/wechatsync/` 目录  
- 自动生成符合博客路径的访问链接

## 配置步骤

### 1. 获取 GitHub Token

访问 [GitHub Personal Access Tokens](https://github.com/settings/tokens)，创建新的 Classic Token：

- 选择权限：勾选 `repo`（完整仓库权限）
- 复制生成的 token（格式：`ghp_xxxxxxxxxxxx`）

### 2. 配置到扩展

在微信同步助手扩展中配置 token：

1. 打开扩展弹窗
2. 按 F12 打开开发者工具
3. 在 Console 中执行：

```javascript
chrome.storage.local.set({ 
  'github_vuepress_token': 'ghp_your_token_here' 
}, function() {
  console.log('Token 已保存');
});
```

4. 重新打开扩展，应该能看到 "GitHub-VuePress" 账号

### 3. 验证配置

检查 token 是否正确设置：

```javascript
chrome.storage.local.get(['github_vuepress_token'], function(result) {
  console.log('当前 Token:', result.github_vuepress_token ? '已设置' : '未设置');
});
```

## 使用体验

配置完成后，使用非常简单：

1. 在微信文章页面点击同步按钮
2. 选择 "GitHub-VuePress" 账号
3. 等待同步完成，会自动生成正确的博客链接

### 生成的文件格式

**Front-matter 示例**：
```yaml
---
title: 文章标题
date: 2025-01-15 14:30:00
type: post
blog: true
description: 文章标题
tags:
- 微信公众号
- 混沌随想
---
```

**文件路径**：
- 源文件：`docs/draft/article-title-20250115-143000.md`
- 访问链接：`https://imwangfu.com/2025/01/article-title-20250115-143000.html`

## 注意事项

1. **权限要求**：GitHub token 需要 `repo` 权限
2. **仓库配置**：确保目标仓库存在且可写入
3. **网络环境**：需要稳定的网络连接用于上传图片
4. **测试建议**：首次使用建议先测试简单文章

## 技术细节

### 图片处理流程
1. 检测文章中的图片链接
2. 下载图片到本地（ArrayBuffer）
3. Base64 编码上传到 GitHub
4. 替换文章中的图片链接为 GitHub 地址

### 错误处理
- Token 失效自动提示重新配置
- 上传失败自动重试机制（最多 3 次）
- 详细的错误日志便于调试

这套方案大大简化了我的内容发布流程，从微信公众号到技术博客真正实现了一键发布。对于有类似需求的朋友，可以参考这个实现思路。